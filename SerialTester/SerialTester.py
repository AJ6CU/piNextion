#!/usr/bin/env python3
import serial
import time

def write_to_serial(port, texthdr, mydata: bytes):
    port.write(mydata)
    print("Sent ", texthdr, ": ", mydata.hex(), "\n")
    time.sleep(0.25)


print(" starting serial test\n")
ser = serial.Serial("/dev/ttyS0", 9600, timeout=1)

TuningStep = bytes([0x59, 0x58, 0x68, 0x11, 0x05, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x73])
write_to_serial(ser, "Tuning Step", TuningStep)

ModeUSB = bytes([0x59, 0x58, 0x68, 0x01, 0x03, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x73])
write_to_serial(ser, "Mode USB", ModeUSB)

ModeCWL = bytes([0x59, 0x58, 0x68, 0x01, 0x04, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x73])
write_to_serial(ser, "ModeCWL", ModeCWL)

ModeUSB = bytes([0x59, 0x58, 0x68, 0x01, 0x05, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x73])
write_to_serial(ser, "ModeUSB", ModeUSB)

ModeLSB = bytes([0x59, 0x58, 0x68, 0x01, 0x02, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x73])
write_to_serial(ser, "ModeLSB", ModeLSB)

VFO = bytes([0x59, 0x58, 0x68, 0x04, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x73])
write_to_serial(ser, "VFO", VFO)

TxtStop = bytes([0x59, 0x58, 0x68, 0x07, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x73])
write_to_serial(ser, "TxtStop", TxtStop)

BandDown = bytes([0x59, 0x58, 0x68, 0x03, 0x01, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x73])
write_to_serial(ser, "BandDown",BandDown)

BandUp = bytes([0x59, 0x58, 0x68, 0x03, 0x02, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x73])
write_to_serial(ser, "BandUP", BandUp)

CMDLock = bytes([0x59, 0x58, 0x68, 0x09, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x73])
write_to_serial(ser, "CMDLock", CMDLock)

SDR = bytes([0x59, 0x58, 0x68, 0x08, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x73])
write_to_serial(ser, "SDR", SDR)

RIT = bytes([0x59, 0x58, 0x68, 0x06, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x73])
write_to_serial(ser, "RIT", RIT)

SPLIT = bytes([0x59, 0x58, 0x68, 0x05, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x73])
write_to_serial(ser, "SPLIT", SPLIT)

IFS = bytes([0x59, 0x58, 0x68, 0x0B, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x73])
write_to_serial(ser, "IFS", IFS)

IFSShiftValue1 = bytes([0x59, 0x58, 0x68, 0x0C, 0x74, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x73])
write_to_serial(ser, "IFS ShiftValue1", IFSShiftValue1)

IFSShiftValue2 = bytes([0x59, 0x58, 0x68, 0x0C, 0x4A, 0x06, 0x00, 0x00, 0xFF, 0xFF, 0x73])
write_to_serial(ser, "IFS ShiftValue2", IFSShiftValue2)

ATTOff = bytes([0x59, 0x58, 0x68, 0x0A, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x73])
write_to_serial(ser, "ATTOff", ATTOff)

ATTOn1 = bytes([0x59, 0x58, 0x68, 0x0A, 0x46, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x73])
write_to_serial(ser, "ATTOn1", ATTOn1)

ATTOn2 = bytes([0x59, 0x58, 0x68, 0x0A, 0xB2, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x73])
write_to_serial(ser, "ATTOn2", ATTOn2)


#MemRead = bytes([0x59, 0x58, 0x68, 0x06, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x73])
#FreqChange = bytes([0x59, 0x58, 0x68, 0x02, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x73])




# ser.close()